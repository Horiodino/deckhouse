{{- if hasKey $.Values.nodeManager.internal "cloudProvider" }}
---
apiVersion: v1
kind: Service
metadata:
  {{- include "helm_lib_module_labels" (list . (dict "cluster.x-k8s.io/provider" "bootstrap-kubeadm")) | nindent 2 }}
  name: capi-kubeadm-bootstrap-webhook-service
  namespace: d8-cloud-instance-manager
spec:
  ports:
    - port: 443
      targetPort: webhook-server
  selector:
    cluster.x-k8s.io/provider: bootstrap-kubeadm
{{- end }}

---
apiVersion: cluster.x-k8s.io/v1beta1
kind: Cluster
metadata:
  name: {{ .Values.global.clusterConfiguration.cloud.prefix }}
  namespace: d8-cloud-provider-openstack
  {{- include "helm_lib_module_labels" (list .) | nindent 2 }}
  annotations:
    cluster.x-k8s.io/paused: "true"
spec:
  clusterNetwork:
    pods:
      cidrBlocks:
      - {{ .Values.global.clusterConfiguration.podSubnetCIDR }}
    services:
      cidrBlocks:
      - {{ .Values.global.clusterConfiguration.serviceSubnetCIDR }}
    serviceDomain: {{ .Values.global.clusterConfiguration.clusterDomain }}
  infrastructureRef:
    apiVersion: infrastructure.cluster.x-k8s.io/v1alpha6
    kind: OpenStackCluster
    name: {{ .Values.global.clusterConfiguration.cloud.prefix }}
    namespace: d8-cloud-provider-openstack
---
apiVersion: infrastructure.cluster.x-k8s.io/v1alpha6
kind: OpenStackCluster
metadata:
  name: {{ .Values.global.clusterConfiguration.cloud.prefix }}
  namespace: d8-cloud-provider-openstack
  {{- include "helm_lib_module_labels" (list .) | nindent 2 }}
  annotations:
    cluster.x-k8s.io/paused: "true"
spec:
  cloudName: {{ .Values.global.clusterConfiguration.cloud.prefix }}
  controlPlaneEndpoint:
    host: ""
    port: 0
  identityRef:
    kind: Secret
    name: cloud-config
  controlPlaneAvailabilityZones: {{ .Values.cloudProviderOpenstack.internal.zones }}
